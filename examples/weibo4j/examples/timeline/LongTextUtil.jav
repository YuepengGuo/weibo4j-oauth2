package weibo4j.examples.timeline;
import java.io.BufferedReader;import java.io.IOException;import java.io.InputStreamReader;
public class LongTextUtil {
 public static String getLongText(String longkey) {  try {   Runtime rt = Runtime.getRuntime();      String url = String.format("https://weibo.com/p/aj/mblog/getlongtext?ajwvr=6&mid=%s", longkey);
   String[] simpleCmds = {"curl",      "-XGET", //     "https://weibo.com/p/aj/mblog/getlongtext?ajwvr=6&mid=4174365274843734",     url,     "-H",     "Accept-Encoding: gzip, deflate, br",      "-H",      "Accept-Language: en-US,en;q=0.8,zh-CN;q=0.6,zh;q=0.4,es;q=0.2,zh-TW;q=0.2,fr;q=0.2,pl;q=0.2",      "-H",      "Upgrade-Insecure-Requests: 1",     "-H",     "User-Agent: Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/61.0.3163.100 Safari/537.36",     "-H",     "Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8",     "-H",      "Cookie: SINAGLOBAL=8799373161151.176.1504487007262; UOR=www.google.com,weibo.com,finance.eastmoney.com; YF-Ugrow-G0=8751d9166f7676afdce9885c6d31cd61; __gads=ID=d5600028d0541ae0:T=1510713533:S=ALNI_MZx2-VQVEmV18_HkHjk54oy8jKbng; httpsupgrade_ab=SSL; YF-V5-G0=b2423472d8aef313d052f5591c93cb75; _s_tentry=weibo.com; Apache=8018107614390.182.1510713614826; ULV=1510713614833:2:1:1:8018107614390.182.1510713614826:1504487007271; YF-Page-G0=f27a36a453e657c2f4af998bd4de9419; login_sid_t=7fef0c56fd804220f7981856f2ba1d1a; cross_origin_proto=SSL; SCF=AgPjUvRBRZHYRwhSeiyfgpTZp7u0bHsI35bDOD7IwnxWjLh2J9id_kT3pTmmaJFsqebZB75HJ4b1G1Y5CyPxM4g.; SUB=_2A253CXStDeThGeRI61cR9S3Fwj6IHXVUf-FlrDV8PUNbmtBeLXbukW9mvBFdQB-LySn3Manz7EvGZGi9Lg..; SUBP=0033WrSXqPxfM725Ws9jqgMF55529P9D9W5M9sGhpE-_82VYGrEN0mOJ5JpX5K2hUgL.Fozceh-7SKe41Kz2dJLoIEXLxKMLB--L1h5LxK-L12BL1K-LxK-LBKBL12BLxKqL1-BL1hzLxK-L1KeLBK-t; SUHB=0TPENhwSIkQspM; un=guoyp03@163.com; wvr=6",     "-H",      "Connection: keep-alive",     "--compressed"};//   String url = MessageFormat//     .format("https://weibo.com/p/aj/mblog/getlongtext?ajwvr=6&mid={0}\" -H \"Accept-Encoding: gzip, deflate, br\" -H \"Accept-Language: en-US,en;q=0.8,zh-CN;q=0.6,zh;q=0.4,es;q=0.2,zh-TW;q=0.2,fr;q=0.2,pl;q=0.2\" -H \"Upgrade-Insecure-Requests: 1\" -H \"User-Agent: Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/61.0.3163.100 Safari/537.36\" -H \"Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\" -H \"Cookie: SINAGLOBAL=8799373161151.176.1504487007262; UOR=www.google.com,weibo.com,finance.eastmoney.com; YF-Ugrow-G0=8751d9166f7676afdce9885c6d31cd61; __gads=ID=d5600028d0541ae0:T=1510713533:S=ALNI_MZx2-VQVEmV18_HkHjk54oy8jKbng; httpsupgrade_ab=SSL; YF-V5-G0=b2423472d8aef313d052f5591c93cb75; _s_tentry=weibo.com; Apache=8018107614390.182.1510713614826; ULV=1510713614833:2:1:1:8018107614390.182.1510713614826:1504487007271; YF-Page-G0=f27a36a453e657c2f4af998bd4de9419; login_sid_t=7fef0c56fd804220f7981856f2ba1d1a; cross_origin_proto=SSL; SCF=AgPjUvRBRZHYRwhSeiyfgpTZp7u0bHsI35bDOD7IwnxWjLh2J9id_kT3pTmmaJFsqebZB75HJ4b1G1Y5CyPxM4g.; SUB=_2A253CXStDeThGeRI61cR9S3Fwj6IHXVUf-FlrDV8PUNbmtBeLXbukW9mvBFdQB-LySn3Manz7EvGZGi9Lg..; SUBP=0033WrSXqPxfM725Ws9jqgMF55529P9D9W5M9sGhpE-_82VYGrEN0mOJ5JpX5K2hUgL.Fozceh-7SKe41Kz2dJLoIEXLxKMLB--L1h5LxK-L12BL1K-LxK-LBKBL12BLxKqL1-BL1hzLxK-L1KeLBK-t; SUHB=0TPENhwSIkQspM; un=guoyp03@163.com; wvr=6\" -H \"Connection: keep-alive\" --compressed",//       longkey);//   System.out.println(url);//   String[] commands = { "curl", url };
   Process proc = rt.exec(simpleCmds);
   BufferedReader stdInput = new BufferedReader(new InputStreamReader(     proc.getInputStream()));
//   BufferedReader stdError = new BufferedReader(new InputStreamReader(//     proc.getErrorStream()));////   String e = null;//   while ((e = stdError.readLine()) != null) {//    System.out.println(e);//   }
   StringBuilder sb = new StringBuilder();   String s = null;   while ((s = stdInput.readLine()) != null) {//    System.out.println(s);    sb.append(s);   }   String raw = sb.toString();   String content = raw.substring(raw.indexOf("\"html\":\"")     + "\"html\":\"".length()+1, raw.length() - 3);   return content;  } catch (Throwable t) {   return null;  }
 }
 public static void main(String[] args) throws IOException {  System.out.println(LongTextUtil.getLongText("4174618476059579")); }
}
